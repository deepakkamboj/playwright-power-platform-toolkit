# Architecture Diagrams

## System Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚                         CUSTOMER TEST CODE                                   â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  test('My test', async ({ page }) => {                              â”‚   â”‚
â”‚  â”‚    const provider = new AppProvider(page);                          â”‚   â”‚
â”‚  â”‚    await provider.launch({ app: { id: '...' }, type: Canvas });    â”‚   â”‚
â”‚  â”‚    await provider.click({ name: 'Submit' });                        â”‚   â”‚
â”‚  â”‚  });                                                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                    â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚                    LEVEL 1: APP PROVIDER (Recommended)                       â”‚
â”‚                    lib/core/app-provider.ts                                  â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  export class AppProvider {                                          â”‚  â”‚
â”‚  â”‚    async launch(config: LaunchAppConfig)                             â”‚  â”‚
â”‚  â”‚    async click(options: ControlOptions)                              â”‚  â”‚
â”‚  â”‚    async fill(options: ControlOptions, value: string)                â”‚  â”‚
â”‚  â”‚    async fillForm(formData: Record<string, string>)                  â”‚  â”‚
â”‚  â”‚    async assertVisible(options: ControlOptions)                      â”‚  â”‚
â”‚  â”‚    async close()                                                     â”‚  â”‚
â”‚  â”‚    isReady(): boolean                                                â”‚  â”‚
â”‚  â”‚    getCurrentAppId(): string | null                                  â”‚  â”‚
â”‚  â”‚    getLaunchedApps(): AppMetadata[]                                  â”‚  â”‚
â”‚  â”‚  }                                                                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                    â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚                    LEVEL 2: APP LAUNCHER FACTORY                             â”‚
â”‚                    lib/core/app-launcher.factory.ts                          â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  export class AppLauncherFactory {                                   â”‚  â”‚
â”‚  â”‚    static createLauncher(page, appType): IAppLauncher {              â”‚  â”‚
â”‚  â”‚      switch (appType) {                                              â”‚  â”‚
â”‚  â”‚        case AppType.Canvas:                                          â”‚  â”‚
â”‚  â”‚          return new CanvasAppPage(page);                             â”‚  â”‚
â”‚  â”‚        case AppType.ModelDriven:                                     â”‚  â”‚
â”‚  â”‚          return new ModelDrivenAppPage(page);                        â”‚  â”‚
â”‚  â”‚        case AppType.Portal:                                          â”‚  â”‚
â”‚  â”‚          return new PortalAppPage(page);  // Future                  â”‚  â”‚
â”‚  â”‚      }                                                                â”‚  â”‚
â”‚  â”‚    }                                                                 â”‚  â”‚
â”‚  â”‚  }                                                                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                          â”‚                          â”‚              â”‚
â”‚         â”‚                          â”‚                          â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                          â”‚                          â”‚
          â†“                          â†“                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  â”‚    â”‚                      â”‚    â”‚                     â”‚
â”‚  Canvas Apps     â”‚    â”‚  Model Driven Apps   â”‚    â”‚  Portal Apps        â”‚
â”‚                  â”‚    â”‚                      â”‚    â”‚  (Future)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                          â”‚                          â”‚
          â†“                          â†“                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚          LEVEL 3: PAGE OBJECTS (Implement IAppLauncher Interface)           â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  CanvasAppPage          â”‚  â”‚  ModelDrivenAppPage                    â”‚   â”‚
â”‚  â”‚  lib/pages/             â”‚  â”‚  lib/pages/                            â”‚   â”‚
â”‚  â”‚                         â”‚  â”‚                                        â”‚   â”‚
â”‚  â”‚  launchByName()         â”‚  â”‚  launchByName()                        â”‚   â”‚
â”‚  â”‚  launchById()           â”‚  â”‚  launchById()                          â”‚   â”‚
â”‚  â”‚  waitForAppLoad()       â”‚  â”‚  waitForAppLoad()                      â”‚   â”‚
â”‚  â”‚  getControl()           â”‚  â”‚  getControl()                          â”‚   â”‚
â”‚  â”‚  clickControl()         â”‚  â”‚  clickControl()                        â”‚   â”‚
â”‚  â”‚  fillControl()          â”‚  â”‚  fillControl()                         â”‚   â”‚
â”‚  â”‚  + 50+ Canvas methods   â”‚  â”‚  + 40+ Model Driven methods            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                          â”‚
          â†“                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚                    SUPPORTING INFRASTRUCTURE                                 â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Locators            â”‚  â”‚  Types               â”‚  â”‚  Utilities      â”‚  â”‚
â”‚  â”‚  lib/locators/       â”‚  â”‚  lib/types/          â”‚  â”‚  lib/utils/     â”‚  â”‚
â”‚  â”‚                      â”‚  â”‚                      â”‚  â”‚                 â”‚  â”‚
â”‚  â”‚  BaseLocators        â”‚  â”‚  AppType            â”‚  â”‚  waitForSpinner â”‚  â”‚
â”‚  â”‚  PowerAppsLocators   â”‚  â”‚  AppLaunchMode      â”‚  â”‚  waitForElement â”‚  â”‚
â”‚  â”‚  CanvasAppLocators   â”‚  â”‚  ControlOptions     â”‚  â”‚  safeFill       â”‚  â”‚
â”‚  â”‚  ModelDrivenLocators â”‚  â”‚  CanvasControlType  â”‚  â”‚  dismissBubble  â”‚  â”‚
â”‚  â”‚  260+ selectors      â”‚  â”‚  10+ interfaces     â”‚  â”‚  30+ helpers    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                          â”‚                          â”‚
          â†“                          â†“                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚                         PLAYWRIGHT TEST RUNNER                               â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚  Browser       â”‚  â”‚  Page          â”‚  â”‚  Locators      â”‚                â”‚
â”‚  â”‚  Automation    â”‚  â”‚  Navigation    â”‚  â”‚  Interaction   â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚                    POWER PLATFORM APPLICATIONS                               â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Canvas Apps   â”‚  â”‚  Model Driven Apps â”‚  â”‚  Portal Apps (Future)    â”‚  â”‚
â”‚  â”‚                â”‚  â”‚                    â”‚  â”‚                          â”‚  â”‚
â”‚  â”‚  make.power    â”‚  â”‚  make.powerapps    â”‚  â”‚  make.powerpages         â”‚  â”‚
â”‚  â”‚  apps.com      â”‚  â”‚  .com              â”‚  â”‚  .microsoft.com          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component Responsibilities

### Level 1: AppProvider (Customer Facing)

**Purpose:** Simplest API for customers to launch and test apps

**Responsibilities:**

- Launch apps by ID or name
- Provide unified interface for all app types
- Manage app state and history
- Delegate operations to appropriate launcher
- Track launched apps metadata

**When to use:**

- âœ… Recommended for most customers
- âœ… Testing existing apps
- âœ… Simple test scenarios
- âœ… CI/CD pipelines

### Level 2: AppLauncherFactory (Middleware)

**Purpose:** Create and manage app launchers

**Responsibilities:**

- Create appropriate launcher based on app type
- Cache launcher instances for performance
- Handle app type extensibility
- Provide factory methods for each app type

**When to use:**

- âœ… Advanced scenarios
- âœ… Custom launcher wrappers
- âœ… Need direct launcher access

### Level 3: Page Objects (Implementation)

**Purpose:** Implement actual app interactions

**Responsibilities:**

- Implement IAppLauncher interface
- Provide app-specific methods
- Handle iframe navigation (Canvas)
- Manage locators and selectors
- App creation, editing, publishing

**When to use:**

- âœ… Creating new apps
- âœ… App management operations
- âœ… Maximum control needed
- âœ… Custom test scenarios

## Data Flow

### Example: Customer Launches Canvas App by ID

```
1. Customer Code:
   provider.launch({ app: { id: 'abc-123' }, type: AppType.Canvas })
   â”‚
   â†“
2. AppProvider:
   - Receives launch request
   - Calls AppLauncherFactory.createLauncher(page, AppType.Canvas)
   â”‚
   â†“
3. AppLauncherFactory:
   - Checks cache for existing launcher
   - Creates CanvasAppPage(page) if needed
   - Returns IAppLauncher instance
   â”‚
   â†“
4. AppProvider:
   - Calls launcher.launchById('abc-123', baseUrl, mode)
   - Stores launcher as currentLauncher
   â”‚
   â†“
5. CanvasAppPage:
   - Navigates to app URL
   - Waits for iframe to load
   - Sets canvasPlayerFrame
   - Marks app as ready
   â”‚
   â†“
6. Customer Code:
   provider.click({ name: 'Submit' })
   â”‚
   â†“
7. AppProvider:
   - Delegates to currentLauncher.clickControl()
   â”‚
   â†“
8. CanvasAppPage:
   - Gets control from iframe
   - Clicks control
   - Returns success
```

## Interface Contract: IAppLauncher

```typescript
interface IAppLauncher {
  // Identity
  readonly appType: string;

  // Launching
  launchByName(name, findApp, mode, options): Promise<void>;
  launchById(id, baseUrl, mode, options): Promise<void>;
  waitForAppLoad(options): Promise<void>;

  // State
  isAppReady(): boolean;
  getAppId(): string | null;
  getAppUrl(): string | null;

  // Interaction
  getControl(options): Locator;
  clickControl(options): Promise<void>;
  fillControl(options, value): Promise<void>;
  fillForm(data): Promise<void>;

  // Assertions
  assertControlVisible(options, assertOptions): Promise<void>;
  assertControlText(options, text, assertOptions): Promise<void>;

  // Lifecycle
  closeApp(): Promise<void>;
  reset(): void;
}
```

## Extension Points

### Adding New App Type (e.g., Portal)

```typescript
// 1. Create PortalAppPage implementing IAppLauncher
export class PortalAppPage implements IAppLauncher {
  readonly appType = AppType.Portal;
  // ... implement all IAppLauncher methods
}

// 2. Update AppLauncherFactory
static createLauncher(page, appType) {
  switch (appType) {
    case AppType.Portal:
      return new PortalAppPage(page);
  }
}

// 3. Customers can immediately use it!
await provider.launch({
  app: { id: 'portal-id' },
  type: AppType.Portal
});
```

### Adding New Provider Method

```typescript
// 1. Add to AppProvider
async selectDropdown(options: ControlOptions, value: string) {
  this.ensureLauncherExists();
  await this.currentLauncher!.selectControl(options, value);
}

// 2. Add to IAppLauncher interface
selectControl(options: ControlOptions, value: string): Promise<void>;

// 3. Implement in CanvasAppPage and ModelDrivenAppPage
async selectControl(options, value) {
  // Canvas-specific implementation
}
```

## Benefits Summary

### For Customers

- ğŸš€ **Simple** - One line to launch any app
- ğŸ¯ **Flexible** - Launch by ID or name
- ğŸ“ **Type Safe** - Full TypeScript support
- ğŸ”§ **Consistent** - Same API for all app types

### For Maintainers

- ğŸ—ï¸ **Extensible** - Easy to add new app types
- ğŸ§© **Modular** - Clear separation of concerns
- ğŸ”’ **Type Safe** - Interface-driven design
- ğŸ“š **Well Documented** - Complete guides and examples

### For the Platform

- âœ… **Scalable** - Factory pattern handles growth
- âœ… **Maintainable** - Single responsibility principle
- âœ… **Testable** - Clear interfaces for mocking
- âœ… **Production Ready** - Built on proven patterns

---

**Architecture Status:** âœ… Production Ready
